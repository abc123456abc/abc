aa
Autocomplite with inpute (Key caching)

======jsp============

<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<html>
<head>
<title>autocomplete demo</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
</head>
<body onLoad="$.init();">
<form>
<label for="autocomplete">Select a programming language: </label>
<input id="autocomplete">
<input type="hidden" id="jsonData">
<input type="hidden" id="tagsData">

<div id="result" style="display: none;">eeee</div> 
</form>
</body>
<script type="text/javascript">

$(document).ready(function() {

       var tags1;
       
       
       $.collectListValue=function(){
              /* var        cityId = JSON.parse($("#jsonData").val());      
              $.each(cityId, function(k, v) {
                  //display the key and value pair
                //  alert(k + ' is ' + v.name+"  "+v.index);
              
                     tags1+=v.name+",";
                  
              }); */
              
              alert("Tags1 Value "+$('#tagsData').val());
              
       };
       
       $.display = function (){
              var    cityId = JSON.parse($("#jsonData").val());      
              //alert(cityId[0].name);
        for (var i in cityId){
                           if(cityId[i].name == document.getElementById("autocomplete").value){
                                            alert(cityId[i].name + "'s" + " Id is  = " +  cityId[i].cityid);
                                            return;
                            }
            }
       };


       $.callData = function(){
              var tt="";
              $.ajax({
               type: "POST",
               url: '<c:url value="/get_customer_list?username=abc" />' ,
             
               success: function(response){
                     var ob=JSON.parse(response);
                     $("#jsonData").val(response);
                     $("#result").html(response);
                     
                     var tags1="[";
                     $.each(ob, function(k, v) {
              
                            tags1 += "'" + v.name + "',";
                         
                     });
                     
                     $("#tagsData").val(tags1.substring(0, tags1.length -1) + "]");
                     
               },
               
               error: function(e){
               alert('Error: ');
               }
               });
              
       };
       
       


$( "#autocomplete" ).autocomplete({
       source: function( request, response ) {

       var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( request.term ), "i" );
              response( $.grep( tags, function( item ){
                     return matcher.test( item );
              }) );
       }
});

$.callData();

var tags; 

$.init = function(){
       tags =  eval($("#tagsData").val()); //[ "c", "java", "php", "coldfusion", "javascript", "asp", "ruby" ];
       alert(tags);
};
});

function pp(){
       alert("Hello pp");
}
</script>
<input type="button" value="Pnakaj Sir Click Me" onClick="alert($('#result').html());" />
<input type="button" value="Pnakaj Sir Click Me" onClick="alert($('#jsonData').val());" />
<input type="button" value="Pnakaj Sir Click Me" onClick="$.display();" />

<input type="button" value="Tags Value" onClick="$.collectListValue();" />
</html>


============================================

================controller=============

import java.util.ArrayList;
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.json.JSONArray;
import org.json.JSONObject;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

import com.cnk.hibernatecache.entities.ERPMaster;
import com.cnk.hibernatecache.service.IMasterService;




@Controller
public class MasterController {

                
                @Autowired
                private IMasterService masterService;
                
                
                
                
                @RequestMapping(value="/master", method = RequestMethod.GET)
                protected String  printWelcome(HttpServletRequest request,ModelMap model,
                                                HttpServletResponse response)
                                                throws Exception {
                System.out.println("Controller");
                                return "master";
                }
                @RequestMapping(value="/save",method=RequestMethod.GET)
                public String saveErp1(ModelMap model)
                {
                                System.out.println("Save.. In Mster Controller");
                                
                                ERPMaster ee=new ERPMaster();
                                ee.setMcategory("Account");
                                ee.setCode("ACC");
                                ee.setDescription("Accounting");
                                
                                masterService.saverMaster(ee);
                                
                
                                
                                return "master";
                }
                
                
                @RequestMapping(value="/displayAll",method=RequestMethod.GET)
                public String displayAll1()
                {
                                
                                /*List<ERPMaster> list=masterService.findAllMaster();
                                System.out.println("Total List Size "+list.size());
                                return "master";
                                */
                                
                                // for 
                                
                                return "master";
                                
                }
                
                @RequestMapping(value = "/get_customer_list", method = RequestMethod.POST)
                public @ResponseBody
                List<String> getCustomerList(@RequestParam("username") String query) throws Exception {
                                
                                System.out.println("autocomplite box for customer username=" + query);
                                
                                List<String> customerList= new ArrayList<String>();
                                
/*                           customerList.add("Ajay/1");
                                customerList.add("Ankit/2");
                                customerList.add("Abrahim/3");
                                customerList.add("Abdul/4");
                                customerList.add("Amar/5");*/
                /*           
                                String res =  "{'UserDetails': [{'name':'logo', 'index':'1'},"
                                                                  + "{'name':'country', 'index':'2'}]}";
                */                                           
                
/*                           String res =  "{UserDetails: [{name:logo, index:1},"
                                                                  + "{name:country, index:2}]}";
*/                                                           
                                
                                String res =  "{UserDetails: [{name:c, cityid:1}," +
        "{name:java, cityid:2}," +
        "{name:php, cityid:3}," +
        "{name:coldfusion, cityid:4}," +
        "{name:javascript, cityid:5}," +    
        "{name:asp, cityid:6}," +
        "{name:ruby, cityid:7}]}"; 

                                
                                
                                                                  /*+ "{name:'cabinclass', index:'3'},"
                                                                  + "{name:'fromsector', index:'4'},"
                                                                  + "{name:'tosector', index:'5'},"
                                                  + "{name:'action', index:'6'}";*/
                                
                                JSONObject userDet = new JSONObject(res);
                                JSONArray userDetJson = userDet.getJSONArray("UserDetails");
                                
                                customerList.add(userDetJson.toString());
                                
                                /*customerList.add(String.format("{0}/{1}", "Ajay", "1"));
                                customerList.add(String.format("{0}/{1}", "Monu", "2"));
                                customerList.add(String.format("{0}/{1}", "Mohan", "3"));
                                customerList.add(String.format("{0}/{1}", "Ankit", "5"));
                */
                                
                                System.out.println("Json Arrya Object "+userDetJson);
                                System.out.println("Ajax ...."+customerList);

                                return customerList;
                }
                
                
}


